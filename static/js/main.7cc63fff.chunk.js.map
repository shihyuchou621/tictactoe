{"version":3,"sources":["isWin.js","AppAuto.js","reportWebVitals.js","AI.js","index.js"],"names":["isWin","plate","winStr","winObj","O","X","i","length","ox","replace","RegExp","includes","every","v","produceNewStr","isO","newStr","player","setCorner","a","b","newPlate","Math","random","AI","join","findIndex","App","useState","setIsO","aiFirst","setAiFirst","initiative","setInitiative","Array","fill","setPlate","over","setOver","start","setStart","useEffect","play","result","filter","handleClick","index","resetGame","disabled","onClick","className","map","unit","bind","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","CORNER","WINSTR","ai","WIN_OBJ","enemyOX","console","log","match","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7cc63fff.chunk.js","sourcesContent":["export default function isWin(plate) {\n  const winStr = ',036,147,258,012,345,678,048,246,';\n  const winObj = {O: winStr, X: winStr};\n  for (let i = 0; i < plate.length; i++) {\n    const ox = plate[i]; // O, X, ''\n    if(!ox) continue;\n    winObj[ox] = winObj[ox].replace(new RegExp(i, 'g'), '');\n    if(winObj[ox].includes(',,')) return ox;\n  }\n  if(plate.every(v => v)) return 'T';\n  return '';\n}\n\n/*\nisWin([\n  'O', 'X', 'X',\n  '', 'O', '',\n  '', '', 'O',\n]); // -> O\n\nisWin([\n  'X', 'X', 'X',\n  '', 'O', '',\n  '', '', 'O',\n]); // -> X\n\nisWin([\n  '', 'X', 'X',\n  '', 'O', '',\n  '', '', 'O',\n]); // -> ''\n*/","import React, { useState, useEffect } from 'react';\nimport isWin from \"./isWin\";\nimport './App.css';\n\nconst corner = ['0','2','6','8'];\nconst gameOverStr = ',036,147,258,012,345,678,048,246,';\n\nconst produceNewStr = (plate, isO) => {\n  let newStr = gameOverStr;\n  for(let i = 0; i < 9; i++) {\n    const player = isO ? 'O': 'X';\n    if(plate[i] === player) {\n      newStr = newStr.replace(new RegExp(i, 'g'), '');\n    }\n  }\n  return newStr;\n};\n\nconst setCorner = (plate, isO, a, b) => {\n  const newPlate = [...plate];\n  if(plate[a] === \"\" && plate[b] === \"\") {\n    const i = Math.random() < 0.5 ? a : b;\n    newPlate[i] = isO ? 'X': 'O';\n    return newPlate;\n  }\n  return newPlate;\n};\n\n/* 這邊不一定要傳 isO 因為圈先是固定的 */\nclass AI {\n  play ( plate, isO ) {\n\n    let newPlate = [...plate];\n\n    if(plate[4] === \"\") {\n      newPlate[4] = isO ? 'X': 'O';\n      return newPlate;\n    }\n\n    for(let i = 0; i < 9; i++) {\n      if(produceNewStr(plate, !isO).includes(`,${i},`) && plate[i] === \"\") {\n        newPlate[i] = isO ? 'X': 'O';\n        return newPlate;\n      }\n    }\n\n    for(let i = 0; i < 9; i++) {\n      if(produceNewStr(plate, isO).includes(`,${i},`) && plate[i] === \"\") {\n        newPlate[i] = isO ? 'X': 'O';\n        return newPlate;\n      }\n    }\n\n    newPlate = setCorner(plate, isO, 0, 8);\n    if(newPlate.join('') !== plate.join('')) return newPlate;\n\n    newPlate = setCorner(plate, isO, 2, 6);\n    if(newPlate.join('') !== plate.join('')) return newPlate;\n\n    newPlate = setCorner(plate, isO, 1, 7);\n    if(newPlate.join('') !== plate.join('')) return newPlate;\n\n    newPlate = setCorner(plate, isO, 3, 5);\n    if(newPlate.join('') !== plate.join('')) return newPlate;\n\n    newPlate[plate.findIndex(v => v === \"\")] = isO ? 'X': 'O';\n    return newPlate;\n  }\n}\n\nexport default function App() {\n  const [isO, setIsO] = useState(true);\n  const [aiFirst, setAiFirst] = useState(false);\n  const [initiative, setInitiative] = useState(true);\n  const [plate, setPlate] = useState(Array(9).fill(\"\"));\n  const [over, setOver] = useState(\"\"); // \"\", \"O\", \"X\", \"T\"\n  const [start, setStart] = useState(false);\n\n  useEffect(() => {\n    if(over) return;\n    if(!(aiFirst || plate.join('') !== \"\")) return;\n    const ai = new AI();\n    const newPlate = ai.play(plate, isO);\n    setPlate(newPlate);\n    const result = isWin(newPlate);\n    if(result) {setOver(result);}\n  }, [plate.filter(ox => ox === (isO ? \"O\" : \"X\")).length, start]);\n\n  const handleClick = index => {\n    if(!start) return;\n    if(plate[index] !== \"\") return;\n    const newPlate = [...plate];\n    newPlate[index] = isO ? 'O': 'X';\n    setPlate(newPlate);\n    const result = isWin(newPlate);\n    if(result) {setOver(result);}\n  };\n\n  // ai.play(plate, isO);\n\n  const resetGame = () => {\n    setOver(false);\n    setPlate(Array(9).fill(\"\"));\n    setIsO(true);\n    setInitiative(true);\n    setStart(false);\n    setAiFirst(false);\n  };\n\n  const setInit = () => {\n    setIsO(!isO);\n    setInitiative(!initiative);\n  };\n\n  const setFirstHand = () => {\n    setAiFirst(!aiFirst);\n  };\n\n  const startGame = () => {\n    setStart(!start);\n  };\n\n  return (\n    <div>\n      <button\n        disabled={start}\n        onClick={setInit}\n      >You: {initiative ? \"O\" : \"X\"}</button>\n      <button\n        disabled={start}\n        onClick={setFirstHand}\n      >first hand: {aiFirst ? \"AI\" : \"You\"}\n      </button>\n      <button\n        onClick={startGame}\n        disabled={start}\n      >\n        START\n      </button>\n      <div className=\"plate\">\n        {plate.map((unit, index) =>\n          <div\n            key={index}\n            className=\"unit\"\n            onClick={handleClick.bind(this, index)}\n          >\n            {unit}\n          </div>\n        )}\n      </div>\n      { (over === \"O\" || over === \"X\") &&\n        <div className=\"tttAnswer\">\n        winner: {over}\n          <button onClick={resetGame}>reset</button>\n        </div>\n      }\n      { over === \"T\" &&\n        <div className=\"tttAnswer\">\n        break even\n          <button onClick={resetGame}>reset</button>\n        </div>\n      }\n    </div>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","const CORNER = [0, 2, 6, 8];\nconst WINSTR = ',036,147,258,012,345,678,048,246,';\n\nclass AI {\n  play (plate, ox) { // ox = 'O' or 'X'\n    const newPlate = [...plate];\n\n    /** 第一步 */\n    if(newPlate.filter(v => v).length < 2) {\n      // 如果中間沒下, 那電腦是一定要下的\n      // 如果中間有下，那電腦一定要下四個角(0, 2, 6, 8)\n      const index = !newPlate[4] ? 4: CORNER[~~(Math.random() * CORNER.length)];\n      newPlate[index] = ox;\n      return newPlate;\n    }\n\n    const WIN_OBJ = {O: WINSTR, X: WINSTR};\n    const enemyOX = ox === 'O' ? 'X': 'O';\n\n    /**\n     * 如果第一步沒 return 出去，那就要做以下:\n     * 1. 判斷對方是否快贏，如果是，就要堵對方\n     * 2. 如果否，則積極進攻\n     * */\n    // const oxIndex = newPlate.reduce((arr, v, i) => {\n    //   return v === ox ? [...arr, i]: arr;\n    // }, []);\n    // const enemyOXIndex = newPlate.reduce((arr, v, i) => {\n    //   return v === enemyOX ? [...arr, i]: arr;\n    // }, []);\n\n    // for (let i = 0; i < enemyOXIndex.length; i++) {\n    for (let i = 0; i < plate.length; i++) {\n      if(plate[i] !== enemyOX) continue;\n      // const index = enemyOXIndex[i];\n      console.log(i);\n      WIN_OBJ[enemyOX] = WIN_OBJ[enemyOX].replace(new RegExp(i, 'g'), '');\n      const [ match ] = WIN_OBJ[enemyOX].match(/,\\d,/) || [];\n      if(match) {\n        console.log(match);\n      }\n    }\n    return '';\n  }\n}\n\nconst ai = new AI();\nconsole.log(ai.play([\n  'X', '', 'O',\n  '', 'O', '',\n  'X', '', 'O',\n], 'X'));","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport AppAuto from './AppAuto';\nimport reportWebVitals from './reportWebVitals';\n\nimport AI from './AI';\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppAuto />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}